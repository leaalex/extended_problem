<problem>
<style type="text/css">
.conf-table {
   width: 100%;
}

.arrow-td {
   font-size: 2em;
   text-align: center !important;
   padding: 4px !important;
}

.arrow-td i {
   -webkit-text-stroke: 4px white;
}

td.text-td:first-child::after {
   content: "";
   vertical-align: top;
   min-height: 50px;
}

.text-td {
   height: 50px;
   border: 2px solid #bfbfc1;
   padding: 0px !important;
}

.text-td .conf-item {
   text-align: center;
}

.text-td .conf-item {
   height: 100%;
   min-width: auto;
}

.conf-item {
   max-height: 50px;
   word-break: initial;
   vertical-align: middle;
   background: #f3f3f3;
   display: flex;
   align-items: center;
   justify-content: center;
   width: 31%;
   max-width: 31%;
   text-align: center;
   cursor: move;
   min-width: auto;
}

.conf-item {
   border: 1px solid #b2b2b2;
}

.fixed-item{
    word-break: initial;
    vertical-align: middle;
    background: #ffffff;
    display: flex;
    align-items: center;
    justify-content: center;
    width: 100%;
    height: 100%;
    text-align: center;
    -webkit-touch-callout: none;
     -webkit-user-select: none;
     -khtml-user-select: none; 
     -moz-user-select: none;  
     -ms-user-select: none;   
     user-select: none;
}

.conf-table .conf-item {
   width: 100%;
   border: none;
   margin: 0px;
   max-height: 100%;
}

#conf-id {
   display: flex;
   flex-wrap: wrap;
   background: #f5f5f580;
   min-height: 120px;
}

#conf-id .conf-item {
   max-height: 50px;
   margin: 2px;
}

</style>

<script type="text/javascript">
   
   var element = $("#task_3_2");
    
    $(".conf-answers-place",element).sortable({
        connectWith: "#" + "task_3_2" + " .conf-answers-place",
       cursorAt: {  },
       cursor: "move",
        start: function(event, ui) {
           ui.item.css('width', 'fit-content')
           ui.item.css('min-width', '300px');
           ui.item.css('max-width', '400px');
           ui.item.css('height', 'auto');
           console.log($(this))
           $(".conf-answers-place", element).sortable( "option", "cursorAt", { left: ui.item.width() / 2, top: ui.item.height() / 2 } );
        },
        stop: function(event, ui) {
           ui.item.css('max-width', 'inherit');
           ui.item.css('min-width', 'auto');
             setAnswer();
        },
        sort: function() {
           // console.log("#" + "task_3_2" + " .conf-answers-place")
            // $(".conf-table .conf-answers-place", element).removeClass("conf-wrong-cell");
        },
        opacity: 0.8,
        over: function(event) { 
            $("#" + event.target.id, element).css("border","2px dashed #b2b2b2");
        },
        out: function(event) { 
            $("#" + event.target.id, element).css("border","");
        },
        receive: function(event, ui) {
            // so if > 10
            if($(this).attr('id') !== 'conf-id'){
               if ($(this).children().length == 2) {
                   $(ui.sender).sortable('cancel');
               }
           }
        },
   }).disableSelection();

    function setAnswer(){
       var student_answer = {};
        $(".conf-table td.conf-answers-place", element).map(function(indx, item){   
           item_id = $(item).attr("id");
           student_answer[item_id] = $(item).find(".conf-item").map(function(index, sub_item){
              return $(sub_item).attr("id")
           }).get();
        }).get();
       console.log(student_answer);

        // answer.setJSON({answer: student_answer}); 
    }

</script>

<div id="task_3_2" >


    <table id="inductive_towers_table" class="conf-table" style="font-size: 0.9em;">
      <tbody>
         <tr>
            <td colspan="4" class="text-td conf-answers-place" style="width: 40%" id="a1">
               
            </td>
            <td class="arrow-td"><i class="fa fa-arrow-right"></i></td>
            <td class="text-td conf-answers-place" id="a2" style="width: 25%">
               
            </td>
            <td class="arrow-td"><i class="fa fa-arrow-left"></i></td>
            <td colspan="2" class="text-td conf-answers-place" style="width: 26%" id="a3"></td>
         </tr>
         <tr>
            <td colspan="4" class="arrow-td"><i class="fa fa-arrow-up"></i></td>
            <td colspan="3" rowspan="4"></td>
            <td class="arrow-td"><i class="fa fa-arrow-up"></i></td>
            <td class="arrow-td"><i class="fa fa-arrow-up"></i></td>
         </tr>
         <tr>
            <td colspan="4" class="text-td conf-answers-place" id="a4"></td>
            <td class="text-td conf-answers-place" id="a5"></td>
            <td class="text-td"><div class="fixed-item">Очень редко</div></td>
         </tr>
         <tr>
            <td class="arrow-td"><i class="fa fa-arrow-up"></i></td>
            <td class="arrow-td"><i class="fa fa-arrow-up"></i></td>
            <td class="arrow-td"><i class="fa fa-arrow-up"></i></td>
            <td class="arrow-td"><i class="fa fa-arrow-up"></i></td>
            <td class="arrow-td"><i class="fa fa-arrow-up"></i></td>
            <td class="arrow-td"><i class="fa fa-arrow-up"></i></td>
         </tr>
         <tr>
            <td class="text-td conf-answers-place" id="a6" style="width: 10%;"></td>
            <td class="text-td conf-answers-place" id="a7" style="width: 10%;"></td>
            <td class="text-td" style="width: 10%;"><div class="fixed-item">Выпадает на одно и то же поле 3 раза</div></td>
            <td class="text-td conf-answers-place" id="a8" style="width: 10%;"></td>
            <td class="text-td conf-answers-place" id="a9" style="width: 13%"></td>
            <td class="text-td conf-answers-place" id="a10" style="width: 13%"></td>
         </tr>
      </tbody>
   </table> 

   <div id="conf-id" class="conf-answers-place conf-all-answers">
      <div class="conf-item" id="b1">Вероятность выпадения высокая</div>
      <div class="conf-item" id="b2">Ставка на другой цвет после 5 попаданий позволит выиграть</div>
      <div class="conf-item" id="b3">Вероятность выпадения низкая</div>
      <div class="conf-item" id="b4">часто</div>
      <div class="conf-item" id="b5">редко</div>
      <div class="conf-item" id="b6">Выпадает на одно и то же поле 1 раз</div>
      <div class="conf-item" id="b7">Выпадает на одно и то же поле 2 раза</div>
      <div class="conf-item" id="b8">Выпадает на одно и то же поле 4 раза</div>
      <div class="conf-item" id="b9">Выпадает на одно и то же поле 5 раз</div>
      <div class="conf-item" id="b10">Выпадает на одно и то же поле 6 раз</div>
   </div>



<!--    
    <table id="causal_card_chains_table" class="conf-table">
      <tbody>
         <tr>
            <td class="text-td conf-answers-place" id="a1">
               
            </td>
         </tr>
         <tr>
            <td class="arrow-td"><i class="fa fa-arrow-down"></i></td>   
         </tr>
         <tr>
            <td class="text-td conf-answers-place" id="a2">
               
            </td>
         </tr>
         <tr>
            <td class="arrow-td"><i class="fa fa-arrow-down"></i></td>
         </tr>
         <tr>
            <td class="text-td conf-answers-place" id="a3">
               
            </td>
         </tr>
         <tr>
            <td class="arrow-td"><i class="fa fa-arrow-down"></i></td>
         </tr>
         <tr>
            <td class="text-td conf-answers-place" id="a4">
               
            </td>
         </tr>
         <tr>
            <td class="arrow-td"><i class="fa fa-arrow-down"></i></td>
         </tr>
         <tr>
            <td class="text-td conf-answers-place" id="a5">
               
            </td>
         </tr>
      </tbody>
   </table>

   <div id="conf-id" class="conf-answers-place conf-all-answers">
      <div class="conf-item" id="b1">Поход в казино</div>
      <div class="conf-item" id="b2">Наблюдение за рулеткой</div>
      <div class="conf-item" id="b3">Выявление закономерности</div>
      <div class="conf-item" id="b4">Оценка вероятности и рисков</div>
      <div class="conf-item" id="b5">Решение сделать ставку</div>
   </div> 
-->


<!-- 
<table id="current_cards_table" class="conf-table">
   <tbody>
      <tr>
         <td colspan="3"  class="text-td conf-answers-place" id="a1" style="width: 32%;">
            
         </td>
         <td class="arrow-td"><i class="fa fa-arrow-right"></i></td>
         <td  class="text-td conf-answers-place" id="a2" style="width: 22%;">
            
         </td>
         <td class="arrow-td"><i class="fa fa-arrow-right"></i></td>
         <td  class="text-td conf-answers-place" id="a3" style="width: 24%;">
            
         </td>
         <td class="arrow-td"><i class="fa fa-arrow-right"></i></td>
         <td  class="text-td conf-answers-place" id="a4" style="width: 26%;">
            
         </td>
      </tr>
      <tr>
         <td class="arrow-td"><i class="fa fa-arrow-up"></i></td>
         <td rowspan="3"></td>
         <td class="arrow-td"><i class="fa fa-arrow-down"></i></td>
         <td colspan="5" rowspan="4"></td>
         <td class="arrow-td"><i class="fa fa-arrow-down"></i></td>
      </tr>
      <tr>
      
         <td  class="text-td" style="width: 15%;">
            <div class="fixed-item">Не ставить</div>
         </td>
         <td  class="text-td conf-answers-place" id="a5" style="width: 15%;">
            
         </td>
         <td  class="text-td">
        <div class="fixed-item">Ставка на красное</div>
         </td>
      </tr>
      <tr>
         <td class="arrow-td"><i class="fa fa-arrow-up"></i></td>
         <td class="arrow-td"><i class="fa fa-arrow-down"></i></td>
         <td></td>
      </tr>
      <tr>
         <td colspan="3"  class="text-td conf-answers-place" id="a6">
            
         </td>
         <td></td>
      </tr>
   </tbody>
</table>

   <div id="conf-id" class="conf-answers-place conf-all-answers">
      <div class="conf-item" id="b1">Первый бросок шарика</div>
      <div class="conf-item" id="b2">Выпал на черное</div>
      <div class="conf-item" id="b3">Выпал на черное 2-4 раза</div>
      <div class="conf-item" id="b4">Выпал на черное 5 раз</div>
      <div class="conf-item" id="b5">Выпал на красное</div>
      <div class="conf-item" id="b6">Выпал на зеленое</div>
   </div> 
-->






</div>


</problem>