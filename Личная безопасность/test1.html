<problem>
    <style type="text/css">

        .answer-table td {
            border: 1px solid;
            margin: 20px 0;
            padding: 10px;
            border: 1px solid #c8c8c8;
            /*font-size: 14px;*/
        }
        .answer-table th {
            background: white;
        }

        .radio-td {
            text-align: center;
            position: relative;
        }

        .radio-td:hover{
            background: #ebf0ff;
        }

        .title-td {
            padding: 6px !important;

        }

        .radio-label {
            margin-bottom: 0px;
            margin-top: 0px;
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .radio-label input{
            width: 15px !important;
            height: 15px !important;
        }

        .radio-input:hover{
            cursor: pointer;
        }

        .heading-td {

            width: 80px !important;
            text-align: center !important;

            margin: 20px 0 !important;
            padding: 10px !important;
            border: 1px solid #c8c8c8;
            /*font-size: 14px;*/
            background: #eee !important;
        }

        .answer-table td, .answer-table th {
            word-break: initial !important;

        }

        .table-block tr:hover {
            background: #d5f0fd;
        }

        td.empty-td{
            min-width: 30px;
        }

    </style>

    <script type="text/javascript">
        $(document).ready(function () {

            const language = 'ru'; // ru or en
            const translations = {
                en: {
                    start_btn_label: "Начать",
                    reset_btn_label: "Начать заново",
                    check_btn_label: "Проверить",
                    instruction_label: "Инструкция",
                    instruction_general_1: "Данный текст является надежным и информативным способом самооценки уровня тревожности в данный момент (реактивная тревожность как состояние) и личностной тревожности (как устойчивая характеристика человека).",
                    instruction_general_2: "Личностная тревожность характеризует устойчивую склонность воспринимать большой круг ситуаций как угрожающие, реагировать на такие ситуации состоянием тревоги. Реактивная тревожность характеризуется напряжением, беспокойством, нервозностью. Очень высокая реактивная тревожность вызывает нарушения внимания, иногда нарушение тонкой координации. Очень высокая личностная тревожность прямо коррелирует с наличием невротического конфликта, с эмоциональными и невротическими срывами и с психосоматическими заболеваниями.",
                    instruction_general_3: "Но тревожность не является изначально негативной чертой. Определенный уровень тревожности — естественная и обязательная особенность активной личности. При этом существует оптимальный индивидуальный уровень «полезной тревоги».",
                    rt_label: "Реактивная тревожность",
                    lt_label: "Личностная тревожность",
                    rt_low: "низкая тревожность",
                    rt_medium: "умеренная тревожность",
                    rt_high: "высокая тревожность",
                    lt_low: "низкая тревожность",
                    lt_medium: "умеренная тревожность",
                    lt_high: "высокая тревожность",
                    instruction_rt_text: "Прочитайте внимательно каждое из приведенных ниже предложений и зачеркните соответствующую цифру справа в зависимости от того, КАК ВЫ СЕБЯ ЧУВСТВУЕТЕ В ДАННЫЙ МОМЕНТ. Над вопросами долго не задумывайтесь, поскольку правильных или неправильных ответов нет.",
                    instruction_lt_text: "Прочитайте внимательно каждое из приведенных ниже предложений и зачеркните соответствующую цифру справа в зависимости от того, КАК ВЫ СЕБЯ ЧУВСТВУЕТЕ ОБЫЧНО. Над вопросами долго не задумывайтесь, поскольку правильных или неправильных ответов нет.",
                    result_label: "Результаты"
                },
                ru: {
                    start_btn_label: "Начать",
                    reset_btn_label: "Начать заново",
                    check_btn_label: "Проверить",
                    instruction_label: "Инструкция",
                    instruction_general_1: "Данный текст является надежным и информативным способом самооценки уровня тревожности в данный момент (реактивная тревожность как состояние) и личностной тревожности (как устойчивая характеристика человека).",
                    instruction_general_2: "Личностная тревожность характеризует устойчивую склонность воспринимать большой круг ситуаций как угрожающие, реагировать на такие ситуации состоянием тревоги. Реактивная тревожность характеризуется напряжением, беспокойством, нервозностью. Очень высокая реактивная тревожность вызывает нарушения внимания, иногда нарушение тонкой координации. Очень высокая личностная тревожность прямо коррелирует с наличием невротического конфликта, с эмоциональными и невротическими срывами и с психосоматическими заболеваниями.",
                    instruction_general_3: "Но тревожность не является изначально негативной чертой. Определенный уровень тревожности — естественная и обязательная особенность активной личности. При этом существует оптимальный индивидуальный уровень «полезной тревоги».",
                    rt_label: "Реактивная тревожность",
                    lt_label: "Личностная тревожность",
                    rt_low: "низкая тревожность",
                    rt_medium: "умеренная тревожность",
                    rt_high: "высокая тревожность",
                    lt_low: "низкая тревожность",
                    lt_medium: "умеренная тревожность",
                    lt_high: "высокая тревожность",
                    instruction_rt_text: "Прочитайте внимательно каждое из приведенных ниже предложений и зачеркните соответствующую цифру справа в зависимости от того, КАК ВЫ СЕБЯ ЧУВСТВУЕТЕ В ДАННЫЙ МОМЕНТ. Над вопросами долго не задумывайтесь, поскольку правильных или неправильных ответов нет.",
                    instruction_lt_text: "Прочитайте внимательно каждое из приведенных ниже предложений и зачеркните соответствующую цифру справа в зависимости от того, КАК ВЫ СЕБЯ ЧУВСТВУЕТЕ ОБЫЧНО. Над вопросами долго не задумывайтесь, поскольку правильных или неправильных ответов нет.",
                    result_label: "Результаты"
                }
            };

            const user_labels = translations[language];

            var ConstructiveMotivation = function (html_element) {

                // var user_answers = {
                //     RT: {},
                //     LT: {}
                // };

                $(html_element).append("<p>" + user_labels.instruction_general_1 + "</p>");
                $(html_element).append("<p>" + user_labels.instruction_general_2 + "</p>");
                $(html_element).append("<p>" + user_labels.instruction_general_3 + "</p>");

                var rt_block = $("<div/>", {id: "rt_block", class: "table-block"}).appendTo(html_element);


                let questions = {
                    question_1: {
                        text: "Первый блин всегда комом"
                    },
                    question_2: {
                        text: "Чья земля - того и хлеб"
                    },
                    question_3: {
                        text: "Когда мягко стелят - жестко спать"
                    },
                    question_4: {
                        text: "Ум хорошо, а два лучше"
                    },
                    question_5: {
                        text: "Руби дерево по себе"
                    },
                    question_6: {
                        text: "Худую траву из поля вон"
                    },
                    question_7: {
                        text: "Не подмажешь - не поедешь"
                    },
                    question_8: {
                        text: "На вкус, да на цвет - товарища нет"
                    },
                    question_9: {
                        text: "Чужая душа потемки"
                    },
                    question_10: {
                        text: "Загнанных лошадей следует пристреливать"
                    },
                    question_11: {
                        text: "Лучше поздно, чем никогда"
                    },
                    question_12: {
                        text: "Ни у кого нет полного ответа, но у каждого есть, что добавить"
                    },
                    question_13: {
                        text: "На языке мед, а на сердце лед"
                    },
                    question_14: {
                        text: "Кто смел, тот и съел"
                    },
                    question_15: {
                        text: "Цыплят по осени считают"
                    },
                    question_16: {
                        text: "Правда в огне не горит и в воде не тонет"
                    },
                    question_17: {
                        text: "Выше головы не прыгнешь, выше лба уши не растут"
                    },
                    question_18: {
                        text: "Волка бояться - в лес не ходить"
                    },
                    question_19: {
                        text: "Лучший способ разрешать споры - вовсе избегать их"
                    },
                    question_20: {
                        text: "Выноси заботы на свет, да держи с друзьями совет"
                    },
                    question_21: {
                        text: "Ласковое телятко двух маток сосет, а упрямое - ни одной"
                    },
                    question_22: {
                        text: "Всяк сверчок знай свой шесток: в чужие сани не садись"
                    },
                    question_23: {
                        text: "На свете нет ничего, что заслуживало бы спора"
                    },
                    question_24: {
                        text: "Дружно - не грузно: согласного стада и волк не берет"
                    },
                    question_25: {
                        text: "И мутную воду пьют в невзгоду"
                    },
                    question_26: {
                        text: "Не зря, что Фоме огороды копать, а Ереме над ним воеводой стоять"
                    },
                    question_27: {
                        text: "Дружба дружбой, а служба - службой"
                    },
                    question_28: {
                        text: "В конечном счете справедливость торжествует, а зло наказывается"
                    }
                };

                let answer_choices = {
                    a: {
                        text: "1 балл",
                        value: 1
                    },
                    b: {
                        text: "2 балла",
                        value: 2
                    },
                    c: {
                        text: "4 балла",
                        value: 4
                    },
                    d: {
                        text: "5 баллов",
                        value: 5
                    }
                };

                create_RT_aswer_table();

                function calculate_results_rt() {
                    let results = {
                        M: 0,
                        T: 0,
                        P: 0,
                        L: 0
                    };

                    // let for_E1 = [3, 4, 6, 7, 9, 12, 13, 14, 17, 18];
                    // let for_E2 = [1, 2, 5, 8, 10, 11, 15, 16, 19, 20];

                    let for_M = [1, 5, 9, 13, 17, 21, 25];
                    let for_T = [2, 6, 10, 14, 18, 22, 26];
                    let for_P = [3, 7, 11, 15, 19, 23, 27];
                    let for_L = [4, 8, 12, 16, 20, 24, 28];

                    Object.keys(state.result.user_answers).forEach(function (item, idx) {
                        let num_question = parseInt(item.replace("question_", ""));
                        if (Object.keys(answer_choices).includes(state.result.user_answers[item])) {
                            if (for_M.includes(num_question)) {
                                results.M += answer_choices[state.result.user_answers[item]].value;
                            } else if (for_T.includes(num_question)) {
                                results.T += answer_choices[state.result.user_answers[item]].value;
                            } else if (for_P.includes(num_question)) {
                                results.P += answer_choices[state.result.user_answers[item]].value;
                            } else if (for_L.includes(num_question)) {
                                results.L += answer_choices[state.result.user_answers[item]].value;
                            }

                            else {
                                console.error("Undefined question.");
                            }
                        }
                    });
                    return results;
                }


                function createResultBlockRT() {
                    var result = calculate_results_rt();
                    console.log(result);
                    var result_block = $("<div/>", {
                        id: "rt_result_block",
                        class: "result-block",
                        html: "<h2>" + user_labels.result_label + ": </h2>"
                    });

                    result_block.append("<p><strong>" + user_labels.rt_label + "</strong></p>");
                    result_block.append("<p>" + user_labels.rt_low + "</p>");


                    $(rt_block).html(result_block);
                    // $('body').scrollTo(rt_block);
                    $('html, body').animate({
                        scrollTop: $(rt_block).offset().top
                    }, 500);
                }


                function create_RT_aswer_table() {

                    var answer_table = $("<table/>", {
                        class: "answer-table RT-table"
                    });

                    var table_heading = $("<tr/>", {html: "<th></th>"}).appendTo(answer_table);

                    Object.keys(answer_choices).forEach(function (item, index) {
                        table_heading.append( $("<th/>", {html:answer_choices[item].text, class:"heading-td"}));
                        if (index == 1){
                            table_heading.append("<th>" + "</th>");
                        }

                    });

                    Object.keys(questions).forEach(function (item) {
                        var table_tr = $("<tr/>", {});

                        var table_td = $("<td/>", {html: questions[item].text}).appendTo(table_tr);

                        table_td.addClass("title-td");
                        // class=title-td
                        state.result.user_answers[item] = "";
                        Object.keys(answer_choices).forEach(function (choice, index) {
                            let radio_label = $("<label/>", {
                                class: "radio-label",
                            });
                            let radio_input = $("<input/>", {
                                type: "radio",
                                class: "radio-input",
                                value: choice,
                                name: item
                            });

                            radio_label.prepend(radio_input);
                            let choice_td = $("<td/>", {class: "radio-td", html: radio_label});
                            table_tr.append(choice_td)

                            if (index == 1) {
                                let empty_td = $("<td/>", {class: "empty-td", html: ""});
                                table_tr.append(empty_td)
                            }

                            console.log(index);

                        });
                        answer_table.append(table_tr)
                    });


                    $(rt_block).append("<h2>" + user_labels.instruction_label + "</h2>");
                    $(rt_block).append("<p>" + user_labels.instruction_rt_text + "</p>");
                    $(rt_block).append(answer_table);

                    var check_button_wrap = $("<div/>", {
                        class: "check-button-wrap"
                    });

                    var check_button = $("<button/>", {
                        html: user_labels.check_btn_label,
                        class: "check-button",
                        disabled: "disabled"
                    }).appendTo(check_button_wrap);

                    check_button.click(function () {
                        createResultBlockRT();
                    });

                    $(rt_block).append(check_button_wrap);


                    $(".RT-table .radio-input").change(function () {
                        state.result.user_answers[this.name] = this.value;
                        if (Object.keys(state.result.user_answers).map(function (item) { return state.result.user_answers[item] }).every(function (element) { return element.length != 0})) {
                            $(check_button).removeAttr("disabled");
                        }
                        console.log(state.result.user_answers, calculate_results_rt());
                    });
                }

            };

            let state = {
                completed: false,
                result: {
                    types: [],
                    user_answers: {},
                    // user_type
                },

            };

            let constructive_motivation_block = document.getElementById("constructive_motivation_block");
            let constructive_motivation = new ConstructiveMotivation(constructive_motivation_block);

            console.log(constructive_motivation);
        });
    </script>
    <div id="constructive_motivation_block"></div>



</problem>

