<!--<script type="text/javascript" src="simulator.js"></script>-->
<link rel="stylesheet" type="text/css" href="./simulator.css">
<link rel="stylesheet" type="text/css" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
<script
        src="https://code.jquery.com/jquery-3.4.1.min.js"
        integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo="
        crossorigin="anonymous"></script>
<script type="text/javascript">
    window.__define = window.define;
    window.__require = window.require;
    window.define = undefined;
    window.require = undefined;
</script>
<script type="text/javascript" src="./simulator.js"></script>
<script type="text/javascript">
    window.define = window.__define;
    window.require = window.__require;
    window.__define = undefined;
    window.__require = undefined;
</script>



<div id="task_container"></div>

<script type="text/javascript">



    var things_list = [
        {
            name: "water_bottle",
            html: "Бутылка с водой",
            image_src: "water_bottle.svg",
        },
        {
            name: "energy_bar",
            html: "Энергетический батончик",
            image_src: "energy_bar.svg",
        },
        {
            name: "matches",
            html: "Зажигалка или спички",
            image_src: "matches.svg",
        },
        {
            name: "mobile_phone",
            html: "Мобильный телефон",
            image_src: "mobile_phone.svg",

        },
        {
            name: "map",
            html: "Карта местности",
            image_src: "map.svg",

        },
        {
            name: "motorist_vest",
            html: "Жилет автомобилиста",
            image_src: "motorist_vest.svg",

        },
        {
            name: "chocolate",
            html: "Шоколадка",
            image_src: "chocolate.svg",

        },
        {
            name: "pepsi",
            html: "Пепси кола 0,5 л.",
            image_src: "pepsi.svg",

        },
        {
            name: "chips",
            html: "Чипсы",
            image_src: "chips.svg",

        },
        {
            name: "meat_bucket",
            html: "Ведерко с шашлыком",
            image_src: "meat_bucket.svg",

        },
        {
            name: "energy_drink",
            html: "Энергетический напиток",
            image_src: "energy_drink.svg",

        },
        {
            name: "tea_thermos",
            html: "Термос с горячим чаем",
            image_src: "tea_thermos.svg",

        },
        {
            name: "sneakers",
            html: "Модные кроссовки",
            image_src: "sneakers.svg",

        },
        {
            name: "lollipops",
            html: "Леденцы",
            image_src: "lollipops.svg",

        },

    ];

    let messages = {

        msg_1: {
            type: "choice",
            text: "Пока Ваши товарищи вызывают МЧС Вы остались с другом, которого только что достали из озера.",
            choices: [
                {
                    text: "Проверить пульс",
                    next_id: "msg_2"
                },
                {
                    text: "Проверить дыхание",
                    next_id: "msg_3",
                },
                {
                    text: "Вылить воду из легких",
                    next_id: "msg_4",
                },
            ],
            image:"msg_1.jpg"
        },
        msg_2: {
            type: "text",
            text: "Вы проверили пульс. Вы можете обнаружить что он есть, или что его нет, но если предварительно не вылить воду из легких, то дальнейшая реанимация будет невозможна. Если в легких человека вода, то они не могут обогащать кровь человека кислородом. Даже если Вы будете искусственную вентиляцию легких, то состояние человека не улучшится.",
            final: true,
            success: false,
            image:"",
        },
        msg_3: {
            type: "text",
            text: "Вы попытались проверить дыхание своего друга, пока вы его проверяли, в мозгу произошли необратимые изменения. Сердце не билось и в головной мозг не поступала кровь. Нужно было сперва вылить воду и запустить сердце, а потом приступать к другим действиям.",
            final: true,
            success: false,
            image:"",
        },
        msg_4: {
            type: "choice",
            text: "Вы первалили друга через колено, вода вылилась, теперь можно",
            choices: [
                {
                    text: "Проверить дыхание",
                    next_id: "msg_3",
                },
                {
                    text: "Проверить пульс на сонной артерии",
                    next_id: "msg_5"
                }
            ],
            image:""
        },
        msg_5: {
            type: "choice",
            text: "Вы приложили пальцы к сонной артерии друга и",
            choices: [
                {
                    text: "Пульс есть",
                    next_id: "msg_6"
                },
                {
                    text: "Пульса нет",
                    next_id: "msg_7"
                },
            ],
            image:""
        },
        msg_6: {
            type: "choice",
            text: "Пульс на сонной артерии прощупывается, но слабый. Ваш друг похоже без сознания. Что же делать дальше?",
            choices: [
                {
                    text: "Непрямой массаж сердца",
                    next_id: "msg_8"
                },
                {
                    text: "Сделать искуственное дыхание",
                    next_id: "msg_9"
                },
            ],
            image:""
        },
        msg_7: {
            type: "choice",
            text: "Похоже, что пульса нет. Что будете делать? Ведь Ваш друг выглядит как мертвец.",
            choices: [
                {
                    text: "Непрямой массаж сердца + Искуственное дыхание",
                    next_id: "msg_10"
                }
            ],
            image:""
        },
        msg_8:{
            type: "text",
            text: "Ведь пуль есть. Зачем же массажировать сердце? Это только учудшит ситуацию. Надо восстановить дыхание.",
            final: true,
            success: false,
            image:"",
        },

        msg_9:{
            type: "choice",
            text: "Вы делаете искусственное дыхание, и вот друг начал дышать самостоятельно.",
            choices: [
                {
                    text: "Перевернуть друга на живот",
                    next_id: "msg_11"
                },
                {
                    text: "Дождаться МЧС",
                    next_id: "msg_12"
                },
                {
                    text: "Остановить кровотечение и перевязать раны",
                    next_id: "msg_13"
                },
            ],
            image:""
        },
        msg_10:{
            type: "choice",
            text: "Вы можете делать реанимацию своему другу без устали до самого появления врачей, но сердце начало биться, затем появилось дыхание.",
            choices: [
                {
                    text: "Перевернуть друга на живот",
                    next_id: "msg_11"
                },
                {
                    text: "Дождаться МЧС",
                    next_id: "msg_12"
                },
                {
                    text: "Остановить кровотечение и перевязать раны",
                    next_id: "msg_13"
                },
            ],
            image:""
        },
        msg_11:{
            type: "choice",
            text: "А перевязать раны? Кровь до сих пор идет.",
            choices: [
                {
                    text: "Остановить кровотечение и перевязать раны",
                    next_id: "msg_13"
                }
            ],
            image:""
        },
        msg_12:{
            type: "choice",
            text: "Пока Вы ждете врачей, друг может истечь кровью, нужно перевязать раны",
            choices: [
                {
                    text: "Остановить кровотечение и перевязать раны",
                    next_id: "msg_13"
                }
            ],
            image:""
        },
        msg_13:{
            type: "text",
            text: "Вы благополучно дождались врачей, друга отвезли в больницу и его жизни ничего не угрожает. Это произошло благодаря Вашей подготовке и умелым действиям. Вы расказываете своим друзьям о том, как это было. Напомните им о том, как правильно делать непрямой массаж сердца.",
            final: true,
            success: true,
            image:"",
        }

    };

    var simulator = new Simulator({
        element: document.getElementById('task_container'),
        messages: messages,
        // things: things_list,
        images_src: "images/",
        first_msg: "msg_1",
        // out_of_turn: "msg_3",
        debug: true,
        edx_mode: false,
        options: {
            max_things: 5,
            introduction_text: "Вы решили выбраться с друзьями на пикник по поводу возвращения друга со стажировки. Так получилось, что во время купания в озере Ваш друг зацепился ногой за старую колючую проволоку, которую оставили в воде местные жители. В полуденных лучах солнца кровь в смотрится совсем не жутко. Багровая вода стекла с друга, которого извлекли из водоема, и кровь остановилась, но это потому, что рана несущественная или сердце перестало прогонять кровь по артериям и венам?",
            choice_thing_text: "Наберите себе вещей.",
            things_grid: "fifths"
        }
    });



    /***
     *
     * things_grid: number
     *      Сетка вещей для выбора:
     *          thirds - три в ряд
     *          fourths - четыре в ряд
     *          fifths - пять в ряд
     *          sixths - шесть в ряд
     *
     *
     * first_msg: "*msg_id*"
     *      id первого сообщения
     *
     *
     * out_of_turn: "*msg_id*"
     *      если передается id сообщения, то это сообщение будет показано сразу же, минуя Introduction блок и выбор вещей
     *      должен иметь фоновую картинку!!
     *
     * ***/




</script>
