<problem>
    <style type="text/css">
        .task-inputs-block .message, .task-inputs-block .response_message {
            /*display: inline-block !important;*/
            background: whitesmoke !important;
            padding: 10px !important;
            margin-top: 8px !important;
            box-shadow: 0px 0px 1px 1px #d0d5dd !important;
            font-weight: bold !important;
        }

        .task-inputs-block p {
            margin-bottom: 0.41575em !important;
        }

        .task-text code {
            white-space: normal !important;
        }

    </style>
    <script type="loncapa/python">
def comparison_numbers(correct_number, student_number, tol=0.001):
    if type(student_number) == str:
        student_number = student_number.replace(",", ".")
    try:
        st_num = float(student_number)
        return tol >= abs(st_num - correct_number)
    except ValueError:
        return False


def check_answer(expect, answer_given):
    grade = 10
    max_grade = 10
    user_state = [
        {
            "answer": answer_given[0],
            "msg": "",
            "correctness": True
        },
        {
            "answer": answer_given[1],
            "msg": "",
            "correctness": True
        },
        {
            "answer": answer_given[2],
            "msg": "",
            "correctness": True
        },
        {
            "answer": answer_given[3],
            "msg": "",
            "correctness": True
        },
        {
            "answer": answer_given[4],
            "msg": "",
            "correctness": True
        },
        {
            "answer": answer_given[5],
            "msg": "",
            "correctness": True
        },
        {
            "answer": answer_given[6],
            "msg": "",
            "correctness": True
        },
        {
            "answer": answer_given[7],
            "msg": "",
            "correctness": True
        },
        {
            "answer": answer_given[8],
            "msg": "",
            "correctness": True
        },
        {
            "answer": answer_given[9],
            "msg": "",
            "correctness": True
        }
    ]
    overall_message = ''
    all_numbers = True
    try:
        for ix_ind, x in enumerate(user_state):
            if ix_ind in [5]:
                user_state[ix_ind]["ans_int"] = str(x["answer"])
            else:
                user_state[ix_ind]["ans_int"] = float(x["answer"])

    except ValueError:
        grade = 0
        for idx, s in enumerate(user_state):
            user_state[idx]['correctness'] = False
            overall_message = "В ответе допустимы только числовые значения (за исключением ввода платформ). Убедитесь, что все поля заполнены корректно."
            all_numbers = False

    if all_numbers:
        if not comparison_numbers(1017, user_state[0]["ans_int"]):
            grade -= 1
            user_state[0]["correctness"] = False

        if not comparison_numbers(1021, user_state[1]["ans_int"]):
            grade -= 1
            user_state[1]["correctness"] = False

        if not comparison_numbers(1031, user_state[2]["ans_int"]):
            grade -= 1
            user_state[2]["correctness"] = False

        if not comparison_numbers(1049, user_state[3]["ans_int"]):
            grade -= 1
            user_state[3]["correctness"] = False

        if not comparison_numbers(1054, user_state[4]["ans_int"]):
            grade -= 1
            user_state[4]["correctness"] = False

        if not ('ios' in user_state[5]["ans_int"].lower() and 'android' in user_state[5]["ans_int"].lower()):
            grade -= 1
            user_state[5]["correctness"] = False

        if not comparison_numbers(1602, user_state[6]["ans_int"]):
            grade -= 1
            user_state[6]["correctness"] = False

        if not comparison_numbers(1020, user_state[7]["ans_int"]):
            grade -= 1
            user_state[7]["correctness"] = False

        if not comparison_numbers(1190, user_state[8]["ans_int"]):
            grade -= 1
            user_state[8]["correctness"] = False

        if not comparison_numbers(1600, user_state[9]["ans_int"]):
            grade -= 1
            user_state[9]["correctness"] = False
    if 0 > grade:
        grade = 0

    return {'overall_message': str(overall_message),
            'input_list': [
                {'ok': user_state[0]['correctness'], 'msg': user_state[0]['msg'], 'grade_decimal':grade/max_grade},
                {'ok': user_state[1]['correctness'], 'msg': user_state[1]['msg'], 'grade_decimal':grade/max_grade},
                {'ok': user_state[2]['correctness'], 'msg': user_state[2]['msg'], 'grade_decimal':grade/max_grade},
                {'ok': user_state[3]['correctness'], 'msg': user_state[3]['msg'], 'grade_decimal':grade/max_grade},
                {'ok': user_state[4]['correctness'], 'msg': user_state[4]['msg'], 'grade_decimal': grade/max_grade},
                {'ok': user_state[5]['correctness'], 'msg': user_state[5]['msg'], 'grade_decimal': grade/max_grade},
                {'ok': user_state[6]['correctness'], 'msg': user_state[5]['msg'], 'grade_decimal': grade / max_grade},
                {'ok': user_state[7]['correctness'], 'msg': user_state[5]['msg'], 'grade_decimal': grade / max_grade},
                {'ok': user_state[8]['correctness'], 'msg': user_state[5]['msg'], 'grade_decimal': grade / max_grade},
                {'ok': user_state[9]['correctness'], 'msg': user_state[5]['msg'], 'grade_decimal': grade / max_grade}
            ]}

</script>

    <script type="text/javascript">
        document.querySelectorAll('.problem-progress').forEach(function(userItem) {
            function second_passed() {
                let arr = userItem.innerHTML.split(" ")
                arr[0] = Math.round(parseFloat(arr[0].split("/")[0]))+'/'+Math.round(parseFloat(arr[0].split("/")[1]))
                userItem.innerHTML = arr.join(" ")
            }
            setTimeout(second_passed, 300)
        });
    </script>

<!--    <div class="task-text">-->

<!--        <p><strong>Задание</strong></p>-->
<!--        <p>Проанализировать представленную матрицу с оценками уровней опасности кибератак на информационную систему предприятия.</p>-->

<!--        <p><strong>Цель работы:</strong> определять основные виды антропогенных угроз.</p>-->

<!--        <p><strong>Указания к выполнению задания:</strong></p>-->


<!--        <ol>-->
<!--            <li>Посмотреть видеопрактикум, изучить указания к выполнению лабораторной работы, выполнить приведенные в них учебные задания.</li>-->
<!--            <li>В помощью справочной информации на сайт <a href="https://attack.mitre.org/" target="_blank">https://attack.mitre.org/</a> определить меры для смягчения техники атаки «Phishing» и их идентификаторы в системе Mitre.</li>-->
<!--            <li>Вписать их идентификаторы в соответствующие поля в порядке возрастания номеров (только цифры, без буквы «M»).</li>-->
<!--            <li>В помощью справочной информации на сайте <a href="https://attack.mitre.org/" target="_blank">https://attack.mitre.org/</a> определить, для каких платформ представляет угрозу техника «Capture Camera»</li>-->
<!--            <li>Вписать их названия в соответствующие поля.</li>-->
<!--            <li>Скачать из материалов к лабораторной работе файл <a href="/static/L2_Mitre_Layer.json" download="L2_Mitre_Layer.json">«L2_Mitre_Layer.json»</a>. Открыть его используя сайт <a href="https://mitre-attack.github.io/attack-navigator/" target="_blank">https://mitre-attack.github.io/attack-navigator/</a>.</li>-->
<!--            <li>Проанализировать представленную матрицу.</li>-->
<!--            <li>Определить, каким двум техникам в матрице присвоен наивысший уровень (score), а каким двум наименьший.</li>-->
<!--            <li>Вписать их идентификаторы в соответствующие поля в порядке убывания уровня (только цифры, без буквы «T»).</li>-->
<!--        </ol>-->
<!--    </div>-->

    <div class="task-inputs-block">
        <customresponse cfn="check_answer">
            <p>Введите идентификаторы меры для смягчения техники атаки «Phishing» в соответствующие поля в порядке возрастания номеров (только цифры, без буквы «M»):</p>
            <div class="input-block">
                <textline size="10" label=""/><br />
            </div>
            <div class="input-block">
                <textline size="10" label=""/><br />
            </div>
            <div class="input-block">
                <textline size="10" label=""/><br />
            </div>
            <div class="input-block">
                <textline size="10" label=""/><br />
            </div>
            <div class="input-block">
                <textline size="10" label=""/><br />
            </div>
            <hr />
            <div class="input-block">
                <p>Введите платформы, для которых представляет угрозу техника «Capture Camera»:</p>
                <textline size="10" label=""/><br />
            </div>

            <hr />
            <p>Введите идентификаторы техник в соответствующие поля в порядке убывания уровня (только цифры, без буквы «T»)</p>
            <div class="input-block">
                <textline size="10" label=""/><br />
            </div>
            <div class="input-block">
                <textline size="10" label=""/><br />
            </div>
            <div class="input-block">
                <textline size="10" label=""/><br />
            </div>
            <div class="input-block">
                <textline size="10" label=""/><br />
            </div>

        </customresponse>
        <solution>
            <div class="detailed-solution">
                <p><strong>Правильный ответ: </strong></p>
                <p><strong>1017</strong></p>
                <p><strong>1021</strong></p>
                <p><strong>1031</strong></p>
                <p><strong>1049</strong></p>
                <p><strong>1054</strong></p>
                <p><strong>android, ios</strong></p>
                <p><strong>1602</strong></p>
                <p><strong>1020</strong></p>
                <p><strong>1190</strong></p>
                <p><strong>1600</strong></p>
            </div>

        </solution>
    </div>
</problem>