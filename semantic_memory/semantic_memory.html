<!--<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.js"></script>-->
<!--<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.1/css/all.css"-->
<style>

    #semantic_memory_task {
        border: 6px double #046b99;
        padding: 10px;
    }

    #words_pair_wrap {
        /*font-size: 2em;*/
        font-size: 230%;
        /*background: #f6f6f6;*/
        color: black;
        padding: 20px;
        /*height: 50px;*/
        height: 8em;
        /*width: 500px;*/
        /*border: 2px solid #d7d7d7;*/
        display: flex;
        justify-content: center; /* align horizontal */
        align-items: center;
        -webkit-touch-callout: none; /* iOS Safari */
        -webkit-user-select: none; /* Safari */
        -khtml-user-select: none; /* Konqueror HTML */
        -moz-user-select: none; /* Firefox */
        -ms-user-select: none; /* Internet Explorer/Edge */
        user-select: none; /* Non-prefixed version, currently supported by Chrome and Opera */
    }

    #semantic_memory {
        max-width: 810px;
        margin: 0 auto;
    }

    /*.instruction-block{*/
    /*    background: #fafafa;*/
    /*    padding: 6px;*/
    /*    border-radius: 0.5em;*/
    /*}*/

    .start-button, .check-button {
        font-family: "Open Sans", Verdana, Geneva, sans-serif, sans-serif;
        /*width: 6em;*/
        text-shadow: none !important;
        background: #046b99;
        color: #ffffff;
        font-size: 1.5em;
        font-weight: normal;
        border: none;
    }

    .start-button:hover, .check-button:hover {
        /*font-family: "Open Sans",Verdana,Geneva,sans-serif,sans-serif;
        width: 200px;*/
        /* height: 50px; */
        background: #035c83 !important;
        border: none;
        cursor: pointer;
    }

    .start-button:focus, .check-button:focus {
        border: none !important;
        box-shadow: none !important;
    }

    .start-wrap {
        padding: 1.5em 0;
        text-align: center;
    }

    .input-pair-wrap {
        /*margin: 6px;*/
        padding: 6px;
        /*border-radius: 6px;*/
        /*background: #eefbff;*/
        /*display: flex;*/
        /*flex-wrap: wrap;*/
        /*justify-content: center;*/
        /*align-items: center;*/
    }

    .input-pair-wrap .first-word {
        font-size: 1.5em;
        text-align: right;
        flex-direction: column;
        width: 50%;
        word-break: initial;
        display: flex;
        justify-content: center;
    }

    .input-pair-wrap .second-word {
        /*width: 50%;*/
        word-break: initial;
    }

    .input-pair-wrap .second-word label {
        font-size: 1.35em;
        line-height: 1.6em;
        color: black;
    }

    .input-word {
        font: initial !important;
        width: 7em;
        height: auto !important;
        border-radius: 3px !important;
        margin-left: 0px !important;
        max-width: 50%;
        font-size: 1.4em !important;
        padding: 1px 6px !important;
        font-family: "Open Sans", Verdana, Geneva, sans-serif, sans-serif !important;
    }

    .restart-button {

    }

    .answer-inputs-wrap {
        margin: 0 auto;
        width: fit-content;
        text-align: right;
    }


    .correct:after {
        color: #009b00;
        font-size: 1.5em;
        content: "\f00c";
        font-family: FontAwesome;
        /*position: absolute;*/
        /*vertical-align: -75%;*/
        margin: 0px 10px;
    }

    .incorrect:after {
        color: red;
        font-size: 1.5em;
        content: "\f00d";
        margin: 0px 10px;
        /*position: absolute;*/
        font-family: FontAwesome;
        /*vertical-align: -75%;*/
    }

    .result-words-block {}

    .result-wrap-words {
        max-width: 100%;
        /*width: max-content;*/
        width: fit-content;
        margin: 0 auto;

    }

    .result-wrap-words-tr {
        display: flex;
        align-items: center;
        padding: 8px 40px;
    }


    .result-wrap-words-td-first {
        width: 220px;
        font-size: 130%;
        word-break: initial;
    }

    .result-wrap-words-td-second {
        /*padding: 10px;*/
        font-size: 130%;
        min-width: 100px;
        padding-left: 4px;
    }

    .result-wrap-words-td-third {
        font-size: 130%;
        color: #037203;
        word-break: initial;
    }

    .result-wrap-words .result-wrap-words-tr:nth-child(odd) { /*even*/
        background-color: #24b3f033;
    }

    .transcript-result-block{
        padding: 10px;
    }

    @media screen and (max-width: 468px) {
        .result-wrap-words {
            width: auto;
        }

        .result-wrap-words-tr{

            flex-direction: column;
            padding: 8px 10px;
        }

        .result-wrap-words-td-first{
            text-align: center;
            width: 100%;
        }
    }


</style>

<script type="text/javascript">

    const language = "ru";

    var translations = {
        en: {
            start_btn_label: "start_btn_label",
            reset_btn_label: "reset_btn_label",
            check_btn_label: "check_btn_label",
            series_a_label: "series_a_label",
            series_b_label: "series_b_label",
            instruction_text: "instruction_text",
            instruction_label: "instruction_label",
            delay_label: "delay_label",
            check_block_instruction: "check_block_instruction",
            result_label: "result_label",
            logical_memory_label: "logical_memory_label",
            mechanical_memory_label: "mechanical_memory_label",
            coeff_logical_memory_label: "coeff_logical_memory_label",
            coeff_mechanical_memory_label: "coeff_mechanical_memory_label",
            true_reproduced_words_label: "true_reproduced_words_label", // Верно воспроизведенных слов: 10
            start_second_btn_label: "start_second_btn_label",
        },
        ru: {
            start_btn_label: "Начать",
            reset_btn_label: "Начать заново",
            check_btn_label: "Проверить",
            series_a_label: "Серия А",
            series_b_label: "Серия Б",
            instruction_text: "Ход опыта. Испытуемым зачитывают слова. Они должны постараться запомнить их попарно. Затем экспериментатор прочитывает только первое слово каждой пары, а испытуемые записывают второе.",
            instruction_label: "Инструкция",
            delay_label: "Начинаем через",
            check_block_instruction: "Допишите второе слово:",
            result_label: "Результаты:",
            logical_memory_label: "Объем логической памяти",
            mechanical_memory_label: "Объем механической памяти",
            coeff_logical_memory_label: "Коэффициент логической памяти",
            coeff_mechanical_memory_label: "Коэффициент механической памяти",
            true_reproduced_words_label: "Верно воспроизведенных слов", // Верно воспроизведенных слов: 10
            start_second_btn_label: "Начать вторую серию",

        }
    };

    var user_labels = translations[language];

    const series_A_lib = {
        a_word_0: {
            w1: "машина",
            w2: "ехать",
            required: "w2"
        },
        a_word_1: {
            w1: "кружка",
            w2: "пить",
            required: "w2"
        },
        a_word_2: {
            w1: "ручка",
            w2: "писать",
            required: "w2"
        },
        a_word_3: {
            w1: "ботинки",
            w2: "шнурки",
            required: "w2"
        },
        a_word_4: {
            w1: "собака",
            w2: "лаять",
            required: "w2"
        },
        a_word_5: {
            w1: "зима",
            w2: "снеговик",
            required: "w2"
        },
        a_word_6: {
            w1: "свеча",
            w2: "гореть",
            required: "w2"
        },
        a_word_7: {
            w1: "очки",
            w2: "видеть",
            required: "w2"
        },
        a_word_8: {
            w1: "утюг",
            w2: "гладить",
            required: "w2"
        },
        a_word_9: {
            w1: "дерево",
            w2: "лист",
            required: "w2"
        },
        a_word_10: {
            w1: "помидор",
            w2: "овощ",
            required: "w2"
        },
        a_word_11: {
            w1: "рыцарь",
            w2: "защищать",
            required: "w2"
        },
        a_word_12: {
            w1: "армия",
            w2: "солдат",
            required: "w2"
        },
        a_word_13: {
            w1: "кирпич",
            w2: "строить",
            required: "w2"
        },
        a_word_14: {
            w1: "кастрюля",
            w2: "варить",
            required: "w2"
        },
        a_word_15: {
            w1: "стул",
            w2: "сидеть",
            required: "w2"
        },
        a_word_16: {
            w1: "лопата",
            w2: "яма",
            required: "w2"
        },
        a_word_17: {
            w1: "утро",
            w2: "рассвет",
            required: "w2"
        },
        a_word_18: {
            w1: "время",
            w2: "часы",
            required: "w2"
        },
        a_word_19: {
            w1: "телефон",
            w2: "звонок",
            required: "w2"
        },
        a_word_20: {
            w1: "газ",
            w2: "тормоз",
            required: "w2"
        },
        a_word_21: {
            w1: "свинья",
            w2: "поросенок",
            required: "w2"
        },
        a_word_22: {
            w1: "гитара",
            w2: "струна",
            required: "w2"
        },
        a_word_23: {
            w1: "страна",
            w2: "город",
            required: "w2"
        },
        a_word_24: {
            w1: "собака",
            w2: "щенок",
            required: "w2"
        },
        a_word_25: {
            w1: "рука",
            w2: "локоть",
            required: "w2"
        },
        a_word_26: {
            w1: "ключ",
            w2: "замок",
            required: "w2"
        },
        a_word_27: {
            w1: "соль",
            w2: "перец",
            required: "w2"
        },
        a_word_28: {
            w1: "галстук",
            w2: "бабочка",
            required: "w2"
        },
        a_word_29: {
            w1: "врач",
            w2: "халат",
            required: "w2"
        },
        a_word_30: {
            w1: "зачет",
            w2: "экзамен",
            required: "w2"
        },
        a_word_31: {
            w1: "лето",
            w2: "море",
            required: "w2"
        },
        a_word_32: {
            w1: "карта",
            w2: "искать",
            required: "w2"
        }
    };

    const series_B_lib = {
        b_word_0: {
            w1: "слон",
            w2: "автобус",
            required: "w2"
        },
        b_word_1: {
            w1: "брюки",
            w2: "небо",
            required: "w2"
        },
        b_word_2: {
            w1: "ключи",
            w2: "город",
            required: "w2"
        },
        b_word_3: {
            w1: "вилка",
            w2: "провод",
            required: "w2"
        },
        b_word_4: {
            w1: "сестра",
            w2: "дуб",
            required: "w2"
        },
        b_word_5: {
            w1: "бег",
            w2: "огурец",
            required: "w2"
        },
        b_word_6: {
            w1: "остров",
            w2: "пчела",
            required: "w2"
        },
        b_word_7: {
            w1: "гроза",
            w2: "отец",
            required: "w2"
        },
        b_word_8: {
            w1: "химия",
            w2: "матрас",
            required: "w2"
        },
        b_word_9: {
            w1: "корабль",
            w2: "свинья",
            required: "w2"
        },
        b_word_10: {
            w1: "железо",
            w2: "голова",
            required: "w2"
        },
        b_word_11: {
            w1: "часы",
            w2: "звезда",
            required: "w2"
        },
        b_word_12: {
            w1: "краска",
            w2: "водопад",
            required: "w2"
        },
        b_word_13: {
            w1: "осанка",
            w2: "корона",
            required: "w2"
        },
        b_word_14: {
            w1: "самолет",
            w2: "камень",
            required: "w2"
        },
        b_word_15: {
            w1: "десерт",
            w2: "собор",
            required: "w2"
        },
        b_word_16: {
            w1: "спорт",
            w2: "мороз",
            required: "w2"
        },
        b_word_17: {
            w1: "мамонт",
            w2: "круг",
            required: "w2"
        },
        b_word_18: {
            w1: "горох",
            w2: "брат",
            required: "w2"
        },
        b_word_19: {
            w1: "лампа",
            w2: "круг",
            required: "w2"
        },
        b_word_20: {
            w1: "мышь",
            w2: "кулак",
            required: "w2"
        },
        b_word_21: {
            w1: "щука",
            w2: "ботинок",
            required: "w2"
        },
        b_word_22: {
            w1: "крот",
            w2: "поезд",
            required: "w2"
        },
        b_word_23: {
            w1: "зеркало",
            w2: "краб",
            required: "w2"
        },
        b_word_24: {
            w1: "карман",
            w2: "крыша",
            required: "w2"
        },
        b_word_25: {
            w1: "капуста",
            w2: "пояс",
            required: "w2"
        },
        b_word_26: {
            w1: "шапка",
            w2: "март",
            required: "w2"
        },
        b_word_27: {
            w1: "враг",
            w2: "кот",
            required: "w2"
        },
        b_word_28: {
            w1: "алмаз",
            w2: "книга",
            required: "w2"
        },
        b_word_29: {
            w1: "стрела",
            w2: "люстра",
            required: "w2"
        },
        b_word_30: {
            w1: "жаба",
            w2: "носок",
            required: "w2"
        },
        b_word_31: {
            w1: "зуб",
            w2: "дом",
            required: "w2"
        },
        b_word_32: {
            w1: "завтрак",
            w2: "теннис",
            required: "w2"
        }
    };

    var word_pairs_count = 15; //series_A_lib.length;
    var word_display_time = 1000; // millisec
    var delay_between_words = 400; // millisec
    var delay_defore_start = 3; // in sec.

    // var series_A = series_A_lib.sort(function () {
    //     return .5 - Math.random()
    // }).slice(0, word_pairs_count);


    $(document).ready(function () {


        var countdownTimer = function (elem, stop_time, options, stop_func) {

            var timer = createTimer(),
                offset,
                clock,
                interval;


            clock = stop_time * 1000;
            options = options || {};
            options.delay = options.delay || 1;
            options.timer_prefix = options.timer_prefix + " " || "";

            $(elem).append(timer);

            reset();

            function createTimer() {
                var timer_div = document.createElement("div");
                timer_div.className = "timer-block";
                return timer_div;
            }


            function start() {
                if (!interval) {
                    offset = Date.now();
                    console.log(interval);
                    interval = setInterval(update, options.delay);
                }
            }

            function stop() {
                if (interval) {
                    clearInterval(interval);
                    interval = null;
                }
            }

            function reset() {
                clock = stop_time * 1000;
                render();
            }

            function update() {
                // console.log(clock);
                if (clock > 0) {
                    clock -= delta();
                } else {
                    clock = 0;
                    stop();
                    stop_func();
                }
                render();
            }

            function current_time() {
                return clock / 1000;
            }

            function render() {
                timer.innerHTML = "" + options.timer_prefix + sec2time(clock / 1000) + "";
            }

            function delta() {
                var now = Date.now(),
                    d = now - offset;
                offset = now;
                return d;
            }

            function sec2time(timeInSeconds) {
                var pad = function (num, size) {
                        return ('000' + num).slice(size * -1);
                    },
                    time = parseFloat(timeInSeconds).toFixed(3),
                    hours = Math.floor(time / 60 / 60),
                    minutes = Math.floor(time / 60) % 60,
                    seconds = Math.floor(time - minutes * 60),
                    milliseconds = time.slice(-3);

                return seconds
                // pad(minutes, 2) + ':' + pad(seconds, 2)
                // return pad(hours, 2) + ':' + pad(minutes, 2) + ':' + pad(seconds, 2) + ',' + pad(milliseconds, 3);
            }

// public API
            this.current_time = current_time;
            this.start = start;
            this.stop = stop;
            this.reset = reset;
        };

        var Stopwatch = function (elem, options) {

            var timer = createTimer(),
                offset,
                clock,
                interval;

            options = options || {};
            options.delay = options.delay || 1;

            // elem.

            $(elem).append(timer);

            reset();

            // private functions
            function createTimer() {
                var timer_div = document.createElement("div");
                timer_div.className = "timer-block";
                return timer_div;
            }


            function start() {
                if (!interval) {
                    offset = Date.now();
                    interval = setInterval(update, options.delay);
                }
            }

            function stop() {
                if (interval) {
                    clearInterval(interval);
                    interval = null;
                }
            }

            function reset() {
                clock = 0;
                render();
            }

            function update() {
                clock += delta();
                render();
            }

            function current_time() {
                return clock / 1000;
            }

            function render() {
                timer.innerHTML = "" + sec2time(clock / 1000) + "";
            }

            function delta() {
                var now = Date.now(),
                    d = now - offset;

                offset = now;
                return d;
            }

            function sec2time(timeInSeconds) {
                var pad = function (num, size) {
                        return ('000' + num).slice(size * -1);
                    },
                    time = parseFloat(timeInSeconds).toFixed(3),
                    hours = Math.floor(time / 60 / 60),
                    minutes = Math.floor(time / 60) % 60,
                    seconds = Math.floor(time - minutes * 60),
                    milliseconds = time.slice(-3);

                // return pad(minutes, 2) + ':' + pad(seconds, 2);
                return pad(hours, 2) + ':' + pad(minutes, 2) + ':' + pad(seconds, 2) + ',' + pad(milliseconds, 3);
            }

            // public API
            this.current_time = current_time;
            this.start = start;
            this.stop = stop;
            this.reset = reset;
        };

        var SemanticMemory = function (html_element) {
            var student_answer = {
                series_A: {},
                series_B: {}
            };

            var series_A = {};
            Object.keys(series_A_lib).sort(function (value) {
                return .5 - Math.random()
            }).slice(0, word_pairs_count).forEach(function (value) {
                series_A[value] = series_A_lib[value];
                student_answer.series_A[value] = '';
            });

            var series_B = {};
            Object.keys(series_B_lib).sort(function (value) {
                return .5 - Math.random()
            }).slice(0, word_pairs_count).forEach(function (value) {
                student_answer.series_B[value] = '';
                series_B[value] = series_B_lib[value]
            });

            console.log("series_A: ", series_A);
            console.log("series_B: ", series_B);
            console.log("student_answer: ", student_answer);

            var countdown_timer;
            var current_series_let = "A";
            var current_series;

            $(html_element).html("");
            var instruction_div = $("<div>", {
                class: "instruction-block",
            });

            instruction_div.append("<h2><strong>" + user_labels.instruction_label + "</strong></h2>");
            instruction_div.append("<p>" + user_labels.instruction_text + "</p>");

            var task_wrap = $("<div>", {
                id: "task_wrap"
            }).hide();

            var answer_wrap = $("<div>", {
                id: "answer_wrap"
            }).hide();

            var result_wrap = $("<div>", {
                id: "result_wrap"
            }).hide();


            var countdown_timer = $("<div>",
                {
                    id: "countdown_timer"
                }).appendTo(task_wrap);

            var start_wrap = $("<div>", {
                class: "start-wrap"
            });

            var start_button = $("<button>", {
                class: "start-button",
                html: user_labels.start_btn_label
            }).appendTo(start_wrap);


            startTask();

            function startTask() {

                $(html_element).append(instruction_div);
                $(html_element).append(start_wrap);
                $(html_element).append(task_wrap);
                $(html_element).append(answer_wrap);
            }

            start_button.click(function () {
                startSeries();
            });

            function startSeries() {

                // $("#test_div").html("");
                task_wrap.html("");
                start_wrap.hide();
                task_wrap.hide();

                var words_pair_wrap = $("<div>", {
                    id: "words_pair_wrap"
                }).appendTo(task_wrap);

                var words_pair = $("<div>", {
                    id: "words_pair"
                }).appendTo(words_pair_wrap);

                instruction_div.slideUp();

                task_wrap.show();

                stopwatch_timer = new Stopwatch(countdown_timer);

                stopwatch_timer.start();

                if (current_series_let == "A") {
                    current_series = series_A;
                } else {
                    current_series = series_B;
                }

                var countdown_timer = new countdownTimer(words_pair, delay_defore_start, {timer_prefix: user_labels.delay_label}, function () {
                    showSeries(Object.keys(current_series), 0, words_pair, word_display_time, delay_between_words)
                });
                countdown_timer.start();

            }

            function showSeries(array, index, target, word_delay, word_pause) {

                // $("#test_div").append("<p> Задержка перед парой № " + (index + 1).toString() + ": " + stopwatch_timer.current_time() + " сек. </p>");
                stopwatch_timer.stop();
                stopwatch_timer.reset();

                // var slideTime = Math.round(word_pause/3);
                var slideTime = 150; //Math.round(word_pause/3);
                let current_string = current_series[array[index]].w1 + " – " + current_series[array[index]].w2;
                if (array.length - index === 1) {
                    $(target).html(current_string);
                    $(target).fadeIn(slideTime);
                    stopwatch_timer.start();
                    setTimeout(function () {
                        $(target).fadeOut(slideTime);
                        // $("#test_div").append("<p>Показывали пару № " + (index + 1).toString() + ": " + stopwatch_timer.current_time() + " сек. </p>");
                        // $("#test_div").append("<p>Закончили</p>");
                        createAnswerBlock();
                        stopwatch_timer.stop();
                        stopwatch_timer.reset();
                    }, word_delay);
                } else {
                    $(target).html(current_string);
                    $(target).fadeIn(slideTime);
                    stopwatch_timer.start();
                    setTimeout(function () {
                            $(target).fadeOut(slideTime);
                            // $("#test_div").append("<p>Показывали пару № " + (index + 1).toString() + ": " + stopwatch_timer.current_time() + " сек. </p>");
                            stopwatch_timer.stop();
                            stopwatch_timer.reset();
                            setTimeout(function () {
                                showSeries(array, ++index, target, word_delay, word_pause);
                            }, word_pause);
                            stopwatch_timer.start();
                        },
                        word_delay
                    )
                }
            }

            function createAnswerBlock() {
                task_wrap.slideUp();
                // task_wrap.html("");
                answer_wrap.html("");
                answer_wrap.append("<p>" + user_labels.check_block_instruction + "</p>");

                var answer_inputs_wrap = $("<div>", {
                    class: "answer-inputs-wrap"
                });

                Object.keys(current_series).forEach(function (value) {
                    var input_pair_wrap = $("<div>", {
                        class: "input-pair-wrap",
                        id: value
                    });

                    var second_word = $("<div>", {
                        class: "second-word",
                        html: $("<label>", {html: current_series[value].w1 + "&nbsp;–&nbsp;"})
                    });

                    var input_word = $("<input>", {
                        class: "input-word",
                        type: "text"
                    }).appendTo(second_word);

                    input_word.on('input', function () {
                        student_answer['series_' + current_series_let][value] = input_word.val();
                        console.log(student_answer);
                    });

                    input_pair_wrap.append(second_word);
                    answer_inputs_wrap.append(input_pair_wrap);

                });
                answer_wrap.append(answer_inputs_wrap);
                var check_button_wrap = $("<div>", {
                    class: "start-wrap"
                });

                var check_button = $("<button>", {
                    html: user_labels.check_btn_label,
                    class: "check-button"
                }).appendTo(check_button_wrap);

                check_button.click(function () {
                    createResultBlock();
                });

                answer_wrap.append(check_button_wrap);

                $(html_element).append(answer_wrap);

                answer_wrap.slideDown();

            }

            function createResultBlock() {
                // console.log("createResultBlock: ", current_series_let);
                answer_wrap.slideUp();
                result_wrap.html("");
                result_wrap.append("<h2><strong>" + user_labels.result_label + "</strong></h2>");
                console.log(current_series);

                var grade = 0;
                var max_grade = Object.keys(current_series).length;

                function compare_words(c_w, s_w) { return c_w.toLowerCase() == s_w.replace(" ", "").toLowerCase(); }

                var result_words_block = $("<div>", {class: "result-words-block"});
                var result_wrap_words = $("<div>", {class: "result-wrap-words"}).appendTo(result_words_block);
                Object.keys(current_series).forEach(function (value, idx) {

                    var correct_word = current_series[value].w2;
                    var student_word = student_answer['series_' + current_series_let][value];

                    var correctness = compare_words(correct_word, student_word);
                    if (correctness) {
                        grade += 1;
                    }
                    var result_wrap_words_tr = $("<div>", {class: "result-wrap-words-tr"});
                    var result_wrap_words_td_first = $("<div>", {
                        class: "result-wrap-words-td-first",
                        html:  current_series[value].w1 + " – " + (student_word.length > 0 ? student_word : "...")
                    }).appendTo(result_wrap_words_tr);

                    var result_wrap_words_td_status = $("<span>", {
                        class: "status " + (correctness ? "correct" : "incorrect")
                    }).appendTo(result_wrap_words_tr);

                    if (!correctness) {
                        var result_wrap_words_td_third = $("<div>", {
                            class: "result-wrap-words-td-third",
                            html: "(" + current_series[value].w2 + ")"
                        }).appendTo(result_wrap_words_tr);
                    }
                    result_wrap_words.append(result_wrap_words_tr)

                });

                result_wrap.append(result_words_block);


                var memory_volume = (grade / max_grade).toFixed(2);

                if (current_series_let == "A") {
                    var transcript_div = $("<div>", {
                        class: "transcript-result-block"
                    });
                    transcript_div.append("<p>" + user_labels.true_reproduced_words_label + ": " + grade.toString() );
                    transcript_div.append("<p>" + user_labels.coeff_logical_memory_label + ": <strong>" + memory_volume + "</strong></p>");

                    result_wrap.append(transcript_div);

                    var start_B_wrap = $("<div>", {
                        class: "start-wrap"
                    });
                    var start_button = $("<button>", {
                        html: user_labels.start_second_btn_label,
                        class: "start-button"
                    }).appendTo(start_B_wrap);

                    result_wrap.append(start_B_wrap);

                    start_button.click(function () {
                        result_wrap.hide();
                        current_series_let = "B";
                        startSeries();
                    });

                } else {

                    var transcript_div = $("<div>", {
                        class: "transcript-result-block"
                    });

                    transcript_div.append("<p>" + user_labels.true_reproduced_words_label + ": " + grade.toString() );
                    transcript_div.append("<p>" + user_labels.coeff_mechanical_memory_label + ": <strong>" + memory_volume + "</strong></p>");

                    result_wrap.append(transcript_div);

                    var restart_button = $("<button>", {
                        html: user_labels.reset_btn_label
                    });

                    restart_button.click(function (event) {
                        semantic_memory = new SemanticMemory(semantic_memory_task);
                    });
                    result_wrap.append(restart_button);
                }


                $(html_element).append(result_wrap);
                result_wrap.slideDown();

            }

        };

        var semantic_memory_task = document.getElementById("semantic_memory_task");

        $("#semantic_memory_task").closest("xblock").css('overflow-x', 'initial');

        var semantic_memory = new SemanticMemory(semantic_memory_task);

    });

</script>

<div id="semantic_memory">

    <div id="semantic_memory_task"></div>

    <!--<div id="series_title"></div>-->
    <!---->
    <!--<div id="words_pair_wrap">-->
    <!--<div id="words_pair" style="display: none;"></div>-->
    <!--</div>-->

    <!--<div id="test_div"></div>-->

</div>
