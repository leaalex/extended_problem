<problem>
<script type="loncapa/python">
import json

cities = ["city_0","city_1","city_4","city_20","city_31","city_71"]

def check_answer(exp, ans):
    student_answer = json.loads(ans)["answer"]
    student_correct = [cities[0]]
    grade = 0
    del cities[0]
    del student_answer[0]
    max_grade = len(cities)

    for index, s_a in enumerate(student_answer):
        if s_a == cities[index]:
            grade += 1
            student_correct.append(s_a)
        else:
            grade = 0
            break
    result_grade = grade / max_grade
    msg = json.dumps(student_correct)
    if result_grade == 1:
        return {'input_list': [{'ok': True, 'msg': msg, 'grade_decimal': 1}]}
    elif result_grade == 0:
        return {'input_list': [{'ok': False, 'msg': msg, 'grade_decimal': 0}]}
    else:
        return {'input_list': [{'ok': 'Partial', 'msg': msg, 'grade_decimal': result_grade}]}


</script>

<link rel="stylesheet" href="/static/historical_path.css"></link>
<script type="text/javascript" src="/static/historical_path_source.js"></script>
<script type="text/javascript" src="/static/historical_path.js"></script>

<!--<link rel="stylesheet" href="./historical_path.css"></link>-->
<!--<script type="text/javascript" src="./historical_path_source.js"></script>-->
<!--<script type="text/javascript" src="./historical_path.js"></script>-->

    <div class="historical-path-container"></div>

<div id="historical_path_input" style="/*display: none!important;*/">
    <customresponse cfn="check_answer">
        <textline size="40" value="$taskId"/>
        <br/>
    </customresponse>
</div>

<script type="text/javascript">

    let src_map = new sourceMap().svg_map;

    new HistoricalPath({
        svg: src_map,
        element: document.querySelector(".historical-path-container"),
        input: document.querySelector("#historical_path_input"),
        main_city_selector: "#main_city",
        cities_selector: "#cities",
        paths_selector: "#from_varangians_to_greeks"

    });

</script>
</problem>
