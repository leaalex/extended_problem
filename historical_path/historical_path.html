<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>

<script type="loncapa/python">
import json

cities = ["city_0", "city_1", "city_2", "city_3", "city_4", "city_5", "city_6", "city_7", "city_8", "city_9",]

def check_answer(exp, ans):
    student_answer = json.loads(ans)["answer"]
    max_grade = len(cities)
    student_correct = []
    grade = 0
    for index, s_a in enumerate(student_answer):
        if s_a == cities[index]:
            grade += 1
            student_correct.append(s_a)
        else:
            grade = 0
            break
    result_grade = grade / max_grade
    msg = json.dumps(student_correct)
    if result_grade == 1:
        return {'input_list': [{'ok': True, 'msg': msg, 'grade_decimal': 1}]}
    elif result_grade == 0:
        return {'input_list': [{'ok': False, 'msg': msg, 'grade_decimal': 0}]}
    else:
        return {'input_list': [{'ok': 'Partial', 'msg': msg, 'grade_decimal': result_grade}]}

</script>


<link rel="stylesheet" href="./historical_path.css">
<script type="text/javascript" src="./historical_path_source.js"></script>
<script type="text/javascript" src="./historical_path.js"></script>

<div class="historical-path-container"></div>

<div id="test_input"><input type="text" value='{"answer":["city_0","city_1", "city_4"]}'/>
</div>

<div id="historical_path_input" style="/*display: none!important;*/">
    <customresponse cfn="check_answer">
        <textline size="40" value="$taskId"/>
        <br/>
    </customresponse>
</div>

<script type="text/javascript">

    let src_map = new sourceMap().svg_map;

    new HistoricalPath({
        svg: src_map,
        element: document.querySelector(".historical-path-container"),
        input: document.querySelector("#test_input"),
        main_city_selector: "#putincity",
        cities_selector: "#Города",
        paths_selector: "#Из_воряг_в_греки"

    });

</script>

</body>

</html>
