<problem>
    <script type="loncapa/python">
import json

data = [
        {
            "clue": "Прагматическое моделирование технологий массово-коммуникационной деятельности",
            "answer": u"социожурналистика",
            "position": 1,
            "orientation": "across",
            "start_x": 2,
            "start_y": 1,
            "hint": ""
        },
        {
            "clue": "Качества и характеристики коммуникатора, которые отражены в его документах",
            "answer": u"демографические",
            "position": 2,
            "orientation": "across",
            "start_x": 1,
            "start_y": 4,
            "hint": ""
        },
        {
            "clue": "Антитеза в психологии медиакоммуникаций термину «коммуникант»",
            "answer": u"коммуникатор",
            "position": 4,
            "orientation": "across",
            "start_x": 7,
            "start_y": 6,
            "hint": ""
        },
        {
            "clue": "Массово-коммуникационные действия, события, ситуации, происходящие при участии нескольких коммуникантов или представителей аудитории, но не контролируемые ими полностью",
            "answer": u"хэппенинг",
            "position": 5,
            "orientation": "across",
            "start_x": 4,
            "start_y": 9,
            "hint": ""
        },
        {
            "clue": "Соотношение между достигнутым результатом массово-коммуникационной деятельности и использованными при этом материальными и творческими ресурсами",
            "answer": u"эффективность",
            "position": 6,
            "orientation": "across",
            "start_x": 5,
            "start_y": 11,
            "hint": ""
        },
        {
            "clue": "«Действие, устремлённое в будущее» (Маркс Вартофский)",
            "answer": u"модель",
            "position": 10,
            "orientation": "across",
            "start_x": 10,
            "start_y": 13,
            "hint": ""
        },
        {
            "clue": "Создается прежде всего пиаром, пропагандой, рекламой",
            "answer": u"имидж",
            "position": 3,
            "orientation": "down",
            "start_x": 3,
            "start_y": 3,
            "hint": ""
        },
        {
            "clue": "Метод, используемый как эффективный способ выбора стратегии последовательных действий в условиях риска, творческой неопределенности, и именуемый, как древо …",
            "answer": u"решений",
            "position": 7,
            "orientation": "down",
            "start_x": 8,
            "start_y": 8,
            "hint": ""
        },
        {
            "clue": "Принятие чужой инаковости",
            "answer": u"толерантность",
            "position": 8,
            "orientation": "down",
            "start_x": 15,
            "start_y": 1,
            "hint": ""
        },
        {
            "clue": "Множество элементов, а сегодня и мультимедийных компонентов, находящихся в отношениях и связях друг с другом, которые образуют определённую целостность, единство для типологии массмедиа",
            "answer": u"система",
            "position": 9,
            "orientation": "down",
            "start_x": 10,
            "start_y": 8,
            "hint": ""
        },
    ]

data = [
        {
            "clue": "Польский ученый, создавший гелиоцентрическую модель строения Солнечной системы и достаточно точно определивший относительные расстояния от Солнца до планет",
            "answer": u"коперник",
            "position": 1,
            "orientation": "across",
            "start_x": 1,
            "start_y": 3,
            "hint": "Этот ученый Средневековья, наряду с Дж. Бруно, превратили в сознании людей Землю в крошечную частицу Вселенной"
        },
        {
            "clue": "Греческий ученый и поэт, благодаря своим астрономическим наблюдениям достаточно точно вычисливший расстояние от экватора до тропика",
            "answer": u"эратосфен",
            "position": 2,
            "orientation": "across",
            "start_x": 1,
            "start_y": 6,
            "hint": "Древнегреческий астроном, впервые определивший угол наклона земной оси"
        },
        {
            "clue": "Итальянский и французский ученый-астроном, внесший значительный вклад в исследование Луны и планет Солнечной системы и их спутников, определивший расстояние от Солнца до Земли по параллаксу Марса",
            "answer": u"кассини",
            "position": 7,
            "orientation": "across",
            "start_x": 6,
            "start_y": 9,
            "hint": "Это имя носит межпланетная станция, названная в честь итальяно-французского ученого"
        },
        {
            "clue": "Немецкий физик, лауреат Нобелевской премии, один из создателей квантовой механики, известен широкой публике благодаря мысленному эксперименту, демонстрирующему неполноту квантовой механики при переходе от субатомных систем к макроскопическим",
            "answer": u"шредингер",
            "position": 9,
            "orientation": "across",
            "start_x": 1,
            "start_y": 15,
            "hint": "Выдающийся физик, один из отцов квантовой механики"
        },
        {
            "clue": "Датский физик, один из создателей квантовой механики, создатель первой квантовой теории атома",
            "answer": u"бор",
            "position": 11,
            "orientation": "across",
            "start_x": 12,
            "start_y": 5,
            "hint": "Ученый, предложивший планетарную модель атома"
        },
        {
            "clue": "Древнегреческий философ, развивал атомистические идеи Демокрита, рассматривал Вселенную как бесконечность",
            "answer": u"эпикур",
            "position": 14,
            "orientation": "across",
            "start_x": 11,
            "start_y": 7,
            "hint": "Древнегреческий философ, своим учением о природе на многие столетия опередивший время"
        },
        {
            "clue": "Английский ученый, заложивший основы классической механики, в том числе закон всемирного тяготения и законы механики",
            "answer": u"ньютон",
            "position": 15,
            "orientation": "across",
            "start_x": 11,
            "start_y": 14,
            "hint": "С этим ученым связана легенда об упавшем ему на голову яблоке"
        },
        {
            "clue": "Немецкий физик, лауреат Нобелевской премии, основоположник квантовой физики, сформулировал второе начало термодинамики в виде принципа возрастания энтропии",
            "answer": u"планк",
            "position": 16,
            "orientation": "across",
            "start_x": 15,
            "start_y": 12,
            "hint": "Именем этого ученого названа основная константа квантовой теории"
        },
        {
            "clue": "Итальянский ученый, гелиоцентрист, основатель экспериментальной физики, одним из первых стал использовать телескоп для исследования небесных тел",
            "answer": u"галилей",
            "position": 17,
            "orientation": "across",
            "start_x": 10,
            "start_y": 18,
            "hint": "Этому ученому принадлежит крылатое высказывание «И всё-таки она вертится!» (итал. E pur si muove! [ɛ ˈpur si muˈovɛ])"
        },


        {
            "clue": "Итальянский философ, гелиоцентрист, рассматривающий звезды как далекие солнца, за свои убеждения пал жертвой римской инквизиции",
            "answer": u"бруно",
            "position": 3,
            "orientation": "down",
            "start_x": 5,
            "start_y": 2,
            "hint": "Итальянский философ эпохи Ренессанса, говорил о множественности обитаемых миров"
        },
        {
            "clue": "Английский физик, основоположник учения об электромагнитном поле",
            "answer": u"фарадей",
            "position": 4,
            "orientation": "down",
            "start_x": 3,
            "start_y": 5,
            "hint": "Ученый, открывший электромагнитную индукцию"
        },
        {
            "clue": "Древнегреческий философ, предполагавший, что Земля имеет форму цилиндра, парящего в центре мира, а звезды и Луна – это «окошки» в  кольцах-торах, окружающих Землю",
            "answer": u"анаксимандр",
            "position": 5,
            "orientation": "down",
            "start_x": 9,
            "start_y": 5,
            "hint": "Древнегреческий философ, считал, что Космос подобен живым существам, которые рождаются, достигают зрелости, стареют и должны погибнуть"
        },
        {
            "clue": "Американский астроном, внес значительный вклад в современные представления о Вселенной, существовании других галактик, а также применил эффект Доплера к космическим объектам (открыл красное смещение)",
            "answer": u"хаббл",
            "position": 6,
            "orientation": "down",
            "start_x": 7,
            "start_y": 8,
            "hint": "Именем этого американского астронома назван орбитальный космический телескоп"
        },
        {
            "clue": "Древнегреческий философ, основоположник атомистики, внес значительный вклад в формирование идей Демокрита",
            "answer": u"левкипп",
            "position": 8,
            "orientation": "down",
            "start_x": 5,
            "start_y": 11,
            "hint": "Древнегореченский философ, который внес значительный вклад в развитие идей Демокрита по атомистической космологии"
        },
        {
            "clue": "Древнегреческий ученый и философ, соратники приписывают ему открытие шарообразности  Земли",
            "answer": u"пифагор",
            "position": 10,
            "orientation": "down",
            "start_x": 16,
            "start_y": 1,
            "hint": "Считается, что этому ученому принадлежит открытие одной из основополагающих теорем евклидовой геометрии"
        },
        {
            "clue": "Немецкий ученый, первым сформулировал три закона движения планет в Солнечной ситсеме",
            "answer": u"кеплер",
            "position": 12,
            "orientation": "down",
            "start_x": 3,
            "start_y": 14,
            "hint": "Именем этого немецкого ученого назван орбитальный телескоп, занимающийся поиском планет в других планетных системах"
        },
        {
            "clue": "Древнегреческий философ, ввел положение о всеобщей изменчивости и предложил геоцентрическую модель мира",
            "answer": u"гераклит",
            "position": 13,
            "orientation": "down",
            "start_x": 14,
            "start_y": 3,
            "hint": "Древнегреческий философ, создал концепцию непрерывного изменения и в качестве сравнения использовал образ реки, в которую невозможно войти дважды"
        },
        {
            "clue": "Немецкий физик-теоретик, один из основателей  современной теоретической физики, автор теории относительности",
            "answer": u"эйнштейн",
            "position": 14,
            "orientation": "down",
            "start_x": 11,
            "start_y": 7,
            "hint": "Известный физик, для доказательства своих теорий использовавший мысленные эксперименты – с лифтом, с поездом, с близнецами и другие"
        },
        {
            "clue": "Создал геоцентрическую модель мира, предсказывающую движение планет, по предполагаемым траекториям – деферентам и эпициклам",
            "answer": u"птолемей",
            "position": 16,
            "orientation": "down",
            "start_x": 15,
            "start_y": 12,
            "hint": "Труды этого ученого многие столетия, вплоть до Коперника, были основополагающими в астрономии"
        }
    ];

def whatisthis(s):
    if isinstance(s, str):
        return "ordinary string"
    elif isinstance(s, unicode):
        return "unicode string"
    else:
        return "not a string"

def check_answer(exp, ans):
    student_answer = json.loads(ans)["answer"]
    grade = 0
    max_grade = len(data)
    msg = ""
    correct_list = []
    for x in data:
        student_word = student_answer["user_state"]["question_" + str(x["unique_position"])]["word"]
        x_word = x["answer"]
        if student_word == x_word:
            grade = grade + 1
            correct_list.append("question_" + str(x["unique_position"]))
    result_grade = grade/max_grade
    msg = str(json.dumps({"correct_list": correct_list}))

    if result_grade == 1:
        return {'input_list': [{'ok': True,'msg':msg,'grade_decimal':1}]}
    elif result_grade == 0:
        return {'input_list': [{'ok':False,'msg':msg,'grade_decimal':0}]}
    else:
        return {'input_list': [{'ok':'Partial','msg':msg,'grade_decimal':result_grade}]}

student_data = []
for idx, item in enumerate(data):
    item["unique_position"] = idx
    new_item = item.copy()
    new_item["answer"] = ''.join(['x'] * int(len(new_item["answer"])))
    student_data.append(new_item)

student_data_json = json.dumps(student_data, ensure_ascii=False).replace("\"", "'")

</script>
    <link rel="stylesheet" type="text/css" href="/static/crossword.css" ></link>
    <script type="text/javascript" src="/static/crossword_true.js"></script>

    <div id="crossword_container">

    </div>

    <p></p>


    <div id="crossword_input" style="/*display: none!important;*/">
        <customresponse cfn="check_answer">
            <textline size="40" value="$taskId" />
            <br/>
        </customresponse>
        <!-- <div class="message-about-grade"></div> -->
    </div>

    <script type="text/javascript">

        var student_data = $student_data_json;

        console.log(student_data);

        var crossword = new Crossword({
            element: document.getElementById('crossword_container'),
            data: student_data,
            client_check: false,
        });

    </script>
</problem>
